(function(){"use strict";var t={2632:function(t,e,a){var r=a(6369),s=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"header container"},[e("div",{staticClass:"header__wrapper"},[e("span",{staticClass:"header__info"},[t._v("Каталог")]),t._m(0),e("a",{staticClass:"header__tel",attrs:{href:"tel:8 800 600 90 09"}},[t._v(" 8 800 600 90 09 ")]),e("CartIndicator")],1)]),e("router-view"),e("footer",{staticClass:"footer container"},[e("div",{staticClass:"footer__wrapper"},[t._m(1),e("ul",{staticClass:"footer__social social"},[e("li",{staticClass:"social__item"},[e("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Вконтакте"}},[e("svg",{attrs:{width:"20",height:"11",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-vk"}})])])]),e("li",{staticClass:"social__item"},[e("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Инстаграм"}},[e("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-insta"}})])])]),e("li",{staticClass:"social__item"},[e("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Facebook"}},[e("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-facebook"}})])])]),e("li",{staticClass:"social__item"},[e("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Twitter"}},[e("svg",{attrs:{width:"17",height:"14",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-twitter"}})])])]),e("li",{staticClass:"social__item"},[e("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Telegram"}},[e("svg",{attrs:{width:"19",height:"17",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-telegram"}})])])])]),e("p",{staticClass:"footer__desc"},[t._v(" Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. ")]),t._m(2),e("span",{staticClass:"footer__copyright"},[t._v(" © 2020 Moire ")])])])],1)},i=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"header__logo",attrs:{href:"#"}},[e("img",{attrs:{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"}})])},function(){var t=this,e=t._self._c;return e("ul",{staticClass:"footer__links"},[e("li",[e("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Каталог ")])]),e("li",[e("a",{staticClass:"footer__link",attrs:{href:"tel:88006009009"}},[t._v(" 8 800 600 90 09 ")])]),e("li",[e("a",{staticClass:"footer__link",attrs:{href:"mailto:hi@moireee.com"}},[t._v(" hi@moire.com ")])]),e("li",[e("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Распродажа ")])]),e("li",[e("a",{staticClass:"footer__link footer__link--medium",attrs:{href:"#"}},[t._v(" Заказать звонок ")])])])},function(){var t=this,e=t._self._c;return e("ul",{staticClass:"footer__data"},[e("li",[e("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Политика конфиденциальности ")])]),e("li",[e("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Публичная оферта ")])])])}],o=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"header__cart",attrs:{to:{name:"cart"},"aria-label":"Корзина с товарами"}},[e("svg",{attrs:{width:"19",height:"24"}},[e("use",{attrs:{"xlink:href":"#icon-cart"}})]),e("span",{staticClass:"header__count",attrs:{"aria-label":"Количество товаров"}},[t._v(t._s(t.$store.state.cartProductsData.length))])])},c=[],l={},n=l,d=a(1001),u=(0,d.Z)(n,o,c,!1,null,null,null),_=u.exports,p=a(3822),m={components:{CartIndicator:_},created(){const t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.loadCart()},methods:{...(0,p.nv)(["loadCart"]),...(0,p.OI)(["updateUserAccessKey"])}},h=m,f=(0,d.Z)(h,s,i,!1,null,null,null),v=f.exports,C=a(2631),g=function(){var t=this,e=t._self._c;return e("main",{staticClass:"content container"},[e("div",{staticClass:"content__top"},[e("div",{staticClass:"content__row"},[e("h1",{staticClass:"content__title"},[t._v("Каталог")]),e("span",{staticClass:"content__info"},[t._v(" "+t._s(t.products.length)+" товара ")])])]),e("div",{staticClass:"content__catalog"},[e("ProductFilter",{attrs:{priceFrom:t.filterPriceFrom,priceTo:t.filterPriceTo,categoryId:t.filterCategoryId,colorId:t.filterColorId,materialsId:t.filterMaterialId,seasonId:t.filterSeasonId},on:{"update:priceFrom":function(e){t.filterPriceFrom=e},"update:price-from":function(e){t.filterPriceFrom=e},"update:priceTo":function(e){t.filterPriceTo=e},"update:price-to":function(e){t.filterPriceTo=e},"update:categoryId":function(e){t.filterCategoryId=e},"update:category-id":function(e){t.filterCategoryId=e},"update:colorId":function(e){t.filterColorId=e},"update:color-id":function(e){t.filterColorId=e},"update:materialsId":function(e){t.filterMaterialId=e},"update:materials-id":function(e){t.filterMaterialId=e},"update:seasonId":function(e){t.filterSeasonId=e},"update:season-id":function(e){t.filterSeasonId=e}}}),e("section",{staticClass:"catalog"},[t.productsLoading?e("div",{staticClass:"product-loading"},[e("p",[t._v("Загрузка каталога...")]),e("img",{attrs:{src:"img/4.gif",alt:"loading"}})]):t._e(),t.productsLoadingFailed?e("div",{staticClass:"product-loading-failed"},[e("p",[t._v("Ошибка загрузки...")]),e("button",{staticClass:"failed-btn",on:{click:function(e){return e.preventDefault(),t.loadProducts.apply(null,arguments)}}},[t._v(" Попробовать еще раз ")])]):t._e(),e("ProductList",{attrs:{products:t.products}}),e("BasePagination",{attrs:{count:t.countProducts,"per-page":t.productsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)])},b=[],y=a(4161);const k="https://vue-moire.skillbox.cc";var I=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"catalog__list"},t._l(t.products,(function(t){return e("ProductItem",{key:t.id,attrs:{product:t}})})),1)},P=[],x=function(){var t=this,e=t._self._c;return e("li",{staticClass:"catalog__item"},[e("router-link",{staticClass:"catalog__pic",attrs:{to:{name:"product",params:{id:t.product.id}}}},[e("img",{attrs:{src:t.curentImg,alt:t.product.title}})]),e("h3",{staticClass:"catalog__title"},[e("a",{attrs:{href:"#"}},[t._v(" "+t._s(t.product.title)+" ")])]),e("span",{staticClass:"catalog__price"},[t._v(t._s(t._f("numberformat")(t.product.price))+" ₽ ")]),e("ul",{staticClass:"colors colors--black"},t._l(t.product.colors,(function(a,r){return e("li",{key:a.color.id,staticClass:"colors__item"},[e("label",{staticClass:"colors__label"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.curentColorId,expression:"curentColorId",modifiers:{number:!0}}],staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-1",checked:""},domProps:{value:a.color.id,checked:t._q(t.curentColorId,t._n(a.color.id))},on:{change:[function(e){t.curentColorId=t._n(a.color.id)},function(e){return t.getImgUrl(r)}]}}),e("span",{staticClass:"colors__value",style:`background-color: ${a.color.code}`})])])})),0)],1)},D=[];function w(t){return(new Intl.NumberFormat).format(t)}var A={data(){return{curentColorId:0,curentImg:""}},props:["product"],filters:{numberformat:w},methods:{getImgUrl(t){this.curentImg=this.product.colors[t].gallery[0].file.url},imgUrlOnCreate(){null!=this.product.colors[0].gallery&&(this.curentImg=this.product.colors[0].gallery[0].file.url),null==this.product.colors[0].gallery&&(this.curentImg=this.product.colors[1].gallery[0].file.url)}},created(){this.imgUrlOnCreate()}},T=A,S=(0,d.Z)(T,x,D,!1,null,null,null),$=S.exports,F={components:{ProductItem:$},props:["products"]},B=F,M=(0,d.Z)(B,I,P,!1,null,null,null),Z=M.exports,L=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"catalog__pagination pagination"},[e("li",{staticClass:"pagination__item"},[e("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":t.page-1===0},attrs:{href:"#","aria-label":"Предыдущая страница"},on:{click:function(e){return e.preventDefault(),t.paginate(t.page-1)}}},[e("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])])]),t._l(t.pages,(function(a){return e("li",{key:a,staticClass:"pagination__item"},[e("a",{staticClass:"pagination__link",class:{"pagination__link--current":a==t.page},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.paginate(a)}}},[t._v(" "+t._s(a)+" ")])])})),e("li",{staticClass:"pagination__item"},[e("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":t.page===Math.ceil(t.count/t.perPage)},attrs:{href:"#","aria-label":"Следующая страница"},on:{click:function(e){return e.preventDefault(),t.paginate(t.page+1)}}},[e("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])])],2)},O=[],E={model:{prop:"page",event:"paginate"},props:["page","count","perPage"],computed:{pages(){return Math.ceil(this.count/this.perPage)}},methods:{paginate(t){t>0&&t<=Math.ceil(this.count/this.perPage)&&this.$emit("paginate",t)}}},q=E,K=(0,d.Z)(q,L,O,!1,null,null,null),V=K.exports,N=function(){var t=this,e=t._self._c;return e("aside",{staticClass:"filter"},[e("form",{staticClass:"filter__form form",attrs:{action:"#",method:"get"},on:{submit:function(e){return e.preventDefault(),t.submit()}}},[e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Цена")]),e("label",{staticClass:"form__label form__label--price"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.curentPriceFrom,expression:"curentPriceFrom",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"min-price"},domProps:{value:t.curentPriceFrom},on:{input:function(e){e.target.composing||(t.curentPriceFrom=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("span",{staticClass:"form__value"},[t._v("От")])]),e("label",{staticClass:"form__label form__label--price"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.curentPriceTo,expression:"curentPriceTo",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"max-price"},domProps:{value:t.curentPriceTo},on:{input:function(e){e.target.composing||(t.curentPriceTo=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("span",{staticClass:"form__value"},[t._v("До")])])]),e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Категория")]),e("label",{staticClass:"form__label form__label--select"},[e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.curentCategoryId,expression:"curentCategoryId",modifiers:{number:!0}}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.curentCategoryId=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:"0"}},[t._v("Все категории")]),t._l(t.categories,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.title)+" ")])}))],2)])]),e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Цвет")]),e("ul",{staticClass:"colors colors--black"},t._l(t.colors,(function(a){return e("li",{key:a.id,staticClass:"colors__item"},[e("label",{staticClass:"colors__label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"colors__radio sr-only check-list__check",attrs:{type:"checkbox",name:"color"},domProps:{value:a.id,checked:Array.isArray(t.checked)?t._i(t.checked,a.id)>-1:t.checked},on:{change:[function(e){var r=t.checked,s=e.target,i=!!s.checked;if(Array.isArray(r)){var o=a.id,c=t._i(r,o);s.checked?c<0&&(t.checked=r.concat([o])):c>-1&&(t.checked=r.slice(0,c).concat(r.slice(c+1)))}else t.checked=i},function(e){return e.preventDefault(),t.onChangeColorCheckbox(a.id)}]}}),e("span",{staticClass:"colors__value",style:`background-color: ${a.code}`})])])})),0)]),e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Материал")]),e("ul",{staticClass:"check-list"},t._l(t.materials,(function(a){return e("li",{key:a.id,staticClass:"check-list__item"},[e("label",{staticClass:"check-list__label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"material"},domProps:{value:a.id,checked:Array.isArray(t.checked)?t._i(t.checked,a.id)>-1:t.checked},on:{change:[function(e){var r=t.checked,s=e.target,i=!!s.checked;if(Array.isArray(r)){var o=a.id,c=t._i(r,o);s.checked?c<0&&(t.checked=r.concat([o])):c>-1&&(t.checked=r.slice(0,c).concat(r.slice(c+1)))}else t.checked=i},function(e){return e.preventDefault(),t.onChangeMaterialCheckbox(a.id)}]}}),e("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(a.title)+" "),e("span",[t._v("("+t._s(a.productsCount)+")")])])])])})),0)]),e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Коллекция")]),e("ul",{staticClass:"check-list"},t._l(t.seasons,(function(a){return e("li",{key:a.id,staticClass:"check-list__item"},[e("label",{staticClass:"check-list__label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"collection"},domProps:{value:a.id,checked:Array.isArray(t.checked)?t._i(t.checked,a.id)>-1:t.checked},on:{change:[function(e){var r=t.checked,s=e.target,i=!!s.checked;if(Array.isArray(r)){var o=a.id,c=t._i(r,o);s.checked?c<0&&(t.checked=r.concat([o])):c>-1&&(t.checked=r.slice(0,c).concat(r.slice(c+1)))}else t.checked=i},function(e){return e.preventDefault(),t.onChangeSeasonCheckbox(a.id)}]}}),e("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(a.title)+" "),e("span",[t._v("("+t._s(a.productsCount)+")")])])])])})),0)]),e("button",{staticClass:"filter__submit button button--primery",attrs:{type:"submit"}},[t._v(" Применить ")]),e("button",{staticClass:"filter__reset button button--second",attrs:{type:"button",disabled:t.isResetBtnDisabled},on:{click:function(e){return t.reset()}}},[t._v(" Сбросить ")])])])},R=[],z=(a(7658),{model:{prop:"checked",event:"change"},data(){return{curentPriceFrom:0,curentPriceTo:0,curentCategoryId:0,curentColorId:[],curentMaterialsId:[],curentSeasonId:[],checkedBox:!1,categoriesData:null,colorsData:null,materialsData:null,seasonData:null,isResetBtnDisabled:!0}},props:["priceFrom","priceTo","categoryId","colorId","materialsId","seasonId"],watch:{priceFrom(t){this.curentPriceFrom=t},priceTo(t){this.curentPriceTo=t},categoryId(t){this.curentCategoryId=t},curentPriceFrom(t){t>0&&(this.isResetBtnDisabled=!1),0==t&&0==this.curentPriceTo&&0==this.curentCategoryId&&0==this.curentColorId.length&&0==this.curentMaterialsId.length&&0==this.curentSeasonId.length&&(this.isResetBtnDisabled=!0)},curentPriceTo(t){t>0&&(this.isResetBtnDisabled=!1),0==t&&0==this.curentPriceFrom&&0==this.curentCategoryId&&0==this.curentColorId.length&&0==this.curentMaterialsId.length&&0==this.curentSeasonId.length&&(this.isResetBtnDisabled=!0)},curentCategoryId(t){t>0&&(this.isResetBtnDisabled=!1),0==t&&0==this.curentPriceTo&&0==this.curentPriceFrom&&0==this.curentColorId.length&&0==this.curentMaterialsId.length&&0==this.curentSeasonId.length&&(this.isResetBtnDisabled=!0)},curentColorId(){this.curentColorId.length>0&&(this.isResetBtnDisabled=!1),0==this.curentColorId.length&&0==this.curentPriceTo&&0==this.curentPriceFrom&&0==this.curentCategoryId&&0==this.curentMaterialsId.length&&0==this.curentSeasonId.length&&(this.isResetBtnDisabled=!0)},curentMaterialsId(){this.curentMaterialsId.length>0&&(this.isResetBtnDisabled=!1),0==this.curentMaterialsId.length&&0==this.curentPriceTo&&0==this.curentPriceFrom&&0==this.curentCategoryId&&0==this.curentColorId.length&&0==this.curentSeasonId.length&&(this.isResetBtnDisabled=!0)},curentSeasonId(){this.curentSeasonId.length>0&&(this.isResetBtnDisabled=!1),0==this.curentSeasonId.length&&0==this.curentPriceTo&&0==this.curentPriceFrom&&0==this.curentCategoryId&&0==this.curentColorId.length&&0==this.curentMaterialsId.length&&(this.isResetBtnDisabled=!0)}},computed:{categories(){return this.categoriesData?this.categoriesData.items:[]},colors(){return this.colorsData?this.colorsData.items:[]},materials(){return this.materialsData?this.materialsData.items:[]},seasons(){return this.seasonData?this.seasonData.items:[]},checked:{get(){return this.value},set(t){this.checkedBox=t}}},methods:{submit(){this.$emit("update:priceFrom",this.curentPriceFrom),this.$emit("update:priceTo",this.curentPriceTo),this.$emit("update:categoryId",this.curentCategoryId),this.$emit("update:colorId",this.curentColorId),this.$emit("update:materialsId",this.curentMaterialsId),this.$emit("update:seasonId",this.curentSeasonId)},reset(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",0),this.$emit("update:categoryId",0),this.$emit("update:colorId",[]),this.$emit("update:materialsId",[]),this.$emit("update:seasonId",[]),document.querySelectorAll(".check-list__check").forEach((t=>t.checked=!1)),this.curentColorId=[],this.curentMaterialsId=[],this.curentSeasonId=[],this.checkedBox=!1},loadCategories(){y.Z.get(k+"/api/productCategories").then((t=>this.categoriesData=t.data))},loadColorsData(){y.Z.get(k+"/api/colors").then((t=>{this.colorsData=t.data}))},loadMaterialsData(){y.Z.get(k+"/api/materials").then((t=>{this.materialsData=t.data}))},loadSeasonData(){y.Z.get(k+"/api/seasons").then((t=>{this.seasonData=t.data}))},onChangeMaterialCheckbox(t){this.$emit("input",this.checked),!0===this.checkedBox&&(this.curentMaterialsId.push(t),this.curentMaterialsId=this.curentMaterialsId.filter((function(t,e,a){if(a.lastIndexOf(t)==e)return t}))),!1===this.checkedBox&&(this.curentMaterialsId=this.curentMaterialsId.filter((e=>e!=t)))},onChangeSeasonCheckbox(t){this.$emit("input",this.checked),!0===this.checkedBox&&(this.curentSeasonId.push(t),this.curentSeasonId=this.curentSeasonId.filter((function(t,e,a){if(a.lastIndexOf(t)==e)return t}))),!1===this.checkedBox&&(this.curentSeasonId=this.curentSeasonId.filter((e=>e!=t)))},onChangeColorCheckbox(t){this.$emit("input",this.checked),!0===this.checkedBox&&(this.curentColorId.push(t),this.curentColorId=this.curentColorId.filter((function(t,e,a){if(a.lastIndexOf(t)==e)return t}))),!1===this.checkedBox&&(this.curentColorId=this.curentColorId.filter((e=>e!=t)))}},created(){this.loadCategories(),this.loadColorsData(),this.loadMaterialsData(),this.loadSeasonData()}}),U=z,j=(0,d.Z)(U,N,R,!1,null,null,null),W=j.exports,G={name:"App",components:{ProductList:Z,BasePagination:V,ProductFilter:W},data(){return{filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColorId:[],filterMaterialId:[],filterSeasonId:[],productsData:null,page:1,productsPerPage:12,count:22,productsLoading:!1,productsLoadingFailed:!1}},computed:{products(){return this.productsData?this.productsData.items:{}},countProducts(){return this.productsData?this.productsData.pagination.total:0}},methods:{loadProducts(){this.productsLoading=!0,this.productsLoadingFailed=!1,y.Z.get(k+"/api/products",{params:{page:this.page,limit:this.productsPerPage,categoryId:this.filterCategoryId,colorIds:this.filterColorId,materialIds:this.filterMaterialId,seasonIds:this.filterSeasonId,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo}}).then((t=>{this.productsData=t.data,this.productsLoading=!1})).catch((()=>this.productsLoadingFailed=!0))}},watch:{page(){this.loadProducts()},filterPriceFrom(){this.loadProducts()},filterPriceTo(){this.loadProducts()},filterCategoryId(){this.loadProducts()},filterColorId(){this.loadProducts()},filterMaterialId(){this.loadProducts()},filterSeasonId(){this.loadProducts()}},created(){this.loadProducts()}},H=G,J=(0,d.Z)(H,g,b,!1,null,null,null),Q=J.exports,X=function(){var t=this,e=t._self._c;return e("main",{staticClass:"content container"},[t.productLoading?e("div",{staticClass:"product-loading"},[e("p",[t._v("Загрузка каталога...")]),e("img",{attrs:{src:"img/4.gif",alt:"loading"}})]):t._e(),t.productLoadingFailed?e("div",{staticClass:"product-loading-failed"},[e("p",[t._v("Ошибка загрузки...")]),e("button",{staticClass:"failed-btn",on:{click:function(e){return e.preventDefault(),t.loadProducts.apply(null,arguments)}}},[t._v(" Попробовать еще раз ")])]):t._e(),t.dataLoaded?e("div",[e("div",{staticClass:"content__top"},[e("ul",{staticClass:"breadcrumbs"},[e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" "+t._s(t.product.category.title)+" ")])],1),e("li",{staticClass:"breadcrumbs__item"},[e("a",{staticClass:"breadcrumbs__link"},[t._v(" "+t._s(t.product.title)+" ")])])])]),e("section",{staticClass:"item"},[e("div",{staticClass:"item__pics pics"},[e("div",{staticClass:"pics__wrapper"},[e("img",{attrs:{width:"570",height:"570",src:t.curentImg,alt:"Название товара"}})]),e("ul",{staticClass:"pics__list"},t._l(t.product.colors,(function(a,r){return e("li",{key:a.id,staticClass:"pics__item"},[e("a",{staticClass:"pics__link",attrs:{href:""}},[e("img",{attrs:{width:"98",height:"147",src:a.gallery[0].file.url,alt:a.gallery[0].file.originalName},on:{click:function(e){return e.preventDefault(),t.showImg(r)}}})])])})),0)]),e("div",{staticClass:"item__info"},[e("span",{staticClass:"item__code"},[t._v("Артикул: "+t._s(t.product.id))]),e("h2",{staticClass:"item__title"},[t._v(t._s(t.product.title))]),e("div",{staticClass:"item__form"},[e("form",{staticClass:"form",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.addToCart.apply(null,arguments)}}},[e("div",{staticClass:"item__row item__row--center"},[e("div",{staticClass:"form__counter"},[e("button",{attrs:{type:"button","aria-label":"Убрать один товар"},on:{click:t.minusAmount}},[e("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-minus"}})])]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.productAmount,expression:"productAmount",modifiers:{number:!0}}],attrs:{type:"text",name:"count"},domProps:{value:t.productAmount},on:{input:function(e){e.target.composing||(t.productAmount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(e){t.productAmount++}}},[e("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-plus"}})])])]),e("b",{staticClass:"item__price"},[t._v(" "+t._s(t._f("numberformat")(t.product.price))+" ₽ ")])]),e("div",{staticClass:"item__row"},[e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Цвет")]),e("ul",{staticClass:"colors colors--black"},t._l(t.product.colors,(function(a,r){return e("li",{key:a.color.id,staticClass:"colors__item",on:{click:function(e){return t.showImg(r)}}},[e("label",{staticClass:"colors__label"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.productColorId,expression:"productColorId",modifiers:{number:!0}}],staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-item"},domProps:{value:a.color.id,checked:t._q(t.productColorId,t._n(a.color.id))},on:{change:function(e){t.productColorId=t._n(a.color.id)}}}),e("span",{staticClass:"colors__value",style:`background-color: ${a.color.code}`})])])})),0)]),e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Размер")]),e("label",{staticClass:"form__label form__label--small form__label--select"},[e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.productSizeId,expression:"productSizeId",modifiers:{number:!0}}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.productSizeId=e.target.multiple?a:a[0]}}},t._l(t.product.sizes,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.title)+" ")])})),0)])])]),e("button",{staticClass:"item__button button button--primery",attrs:{type:"submit"}},[t._v(" В корзину ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.wrongSizeAndColor,expression:"wrongSizeAndColor"}]},[t._v("Укажите цвет и размер")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.productAdded,expression:"productAdded"}]},[t._v("Товар добавлен в корзину")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.productAddSending,expression:"productAddSending"}]},[t._v("Добавляем товар в корзину")])])])]),e("div",{staticClass:"item__desc"},[e("ul",{staticClass:"tabs"},[e("li",{staticClass:"tabs__item"},[e("a",{staticClass:"tabs__link tabs__link--current",on:{click:function(e){return e.preventDefault(),t.showProductInfo.apply(null,arguments)}}},[t._v(" Информация о товаре ")])]),e("li",{staticClass:"tabs__item"},[e("a",{staticClass:"tabs__link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showDeliveryInfo.apply(null,arguments)}}},[t._v(" Доставка и возврат ")])])]),t.productInfo?e("div",{staticClass:"item__content"},[e("h3",[t._v("Состав:")]),t._l(t.product.materials,(function(a){return e("p",{key:a.id},[t._v(" "+t._s(a.title)+" ")])})),e("p",[t._v(" "+t._s(t.product.content)+" ")])],2):t._e(),t.deliveryInfo?e("div",{staticClass:"item__content"},[e("h3",[t._v("Доставка:")]),t._m(0),e("h3",[t._v("Возврат:")]),t._m(1)]):t._e()])])]):t._e()])},Y=[function(){var t=this,e=t._self._c;return e("p",[t._v(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),e("br"),t._v(" 2.Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),e("br")])},function(){var t=this,e=t._self._c;return e("p",[t._v(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),e("br"),t._v(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),e("br"),t._v(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону 8 800 600 90 09"),e("br")])}],tt={name:"ProductPage",data(){return{productData:null,curentImg:"",productAmount:1,productColorId:null,productSizeId:null,checkedBox:!1,productAdded:!1,productAddSending:!1,wrongSizeAndColor:!1,productInfo:!0,deliveryInfo:!1,productLoading:!1,productLoadingFailed:!1,dataLoaded:!1}},filters:{numberformat:w},computed:{product(){return this.productData?this.productData:{}}},methods:{...(0,p.nv)(["addProductToCart"]),addToCart(){null!=this.productSizeId&&null!=this.productColorId?(this.productAdded=!1,this.productAddSending=!0,this.addProductToCart({productId:this.product.id,quantity:this.productAmount,sizeId:this.productSizeId,colorId:this.productColorId}).then((()=>{this.productAmount=1,this.productColorId=null,this.productSizeId=null,this.productAdded=!0,this.productAddSending=!1,this.wrongSizeAndColor=!1}))):(this.wrongSizeAndColor=!0,this.productAdded=!1)},loadProduct(){this.productLoading=!0,this.productLoadingFailed=!1,y.Z.get(k+"/api/products/"+this.$route.params.id).then((t=>{this.productData=t.data,null!=this.product.colors[0].gallery&&(this.curentImg=this.product.colors[0].gallery[0].file.url),null==this.product.colors[0].gallery&&(this.curentImg=this.product.colors[1].gallery[0].file.url),this.productLoading=!1,this.dataLoaded=!0})).catch((()=>this.productLoadingFailed=!0))},showImg(t){const e=document.querySelectorAll(".pics__link");e.forEach((t=>t.classList.remove("active"))),e[t].classList.add("active"),this.curentImg=this.product.colors[t].gallery[0].file.url},minusAmount(){this.productAmount>1&&(this.productAmount=this.productAmount-1)},showProductInfo(){this.productInfo=!0,this.deliveryInfo=!1,document.querySelectorAll(".tabs__link")[0].classList.add("tabs__link--current"),document.querySelectorAll(".tabs__link")[1].classList.remove("tabs__link--current")},showDeliveryInfo(){this.productInfo=!1,this.deliveryInfo=!0,document.querySelectorAll(".tabs__link")[0].classList.remove("tabs__link--current"),document.querySelectorAll(".tabs__link")[1].classList.add("tabs__link--current")}},watch:{"$route.params.id":{handler(){this.loadProduct()},immediate:!0}}},et=tt,at=(0,d.Z)(et,X,Y,!1,null,null,null),rt=at.exports,st=function(){var t=this,e=t._self._c;return e("main",{staticClass:"content container"},[e("div",{staticClass:"content__top"},[t._m(0),e("div",{staticClass:"content__row"},[e("h1",{staticClass:"content__title"},[t._v("Корзина")]),e("span",{staticClass:"content__info"},[t._v(" "+t._s(t.products.length)+" товара ")])])]),e("section",{staticClass:"cart"},[e("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[e("div",{staticClass:"cart__field"},[e("ul",{staticClass:"cart__list"},t._l(t.products,(function(t){return e("CartItem",{key:t.id,attrs:{product:t}})})),1)]),e("div",{staticClass:"cart__block"},[e("p",{staticClass:"cart__desc"},[t._v(" Мы посчитаем стоимость доставки на следующем этапе ")]),e("p",{staticClass:"cart__price"},[t._v(" Итого: "),e("span",[t._v(t._s(t._f("numberformat")(t.totalPrice))+" ₽")])]),e("router-link",{staticClass:"cart__button button button--primery",attrs:{tag:"button",to:{name:"order"}}},[t._v(" Оформить заказ ")])],1)])])])},it=[function(){var t=this,e=t._self._c;return e("ul",{staticClass:"breadcrumbs"},[e("li",{staticClass:"breadcrumbs__item"},[e("a",{staticClass:"breadcrumbs__link",attrs:{href:"index.html"}},[t._v(" Каталог ")])]),e("li",{staticClass:"breadcrumbs__item"},[e("a",{staticClass:"breadcrumbs__link"},[t._v(" Корзина ")])])])}],ot=function(){var t=this,e=t._self._c;return e("li",{staticClass:"cart__item product"},[e("div",{staticClass:"product__pic"},[e("img",{attrs:{src:t.product.img,width:"120",height:"120",alt:"Название товара"}})]),e("h3",{staticClass:"product__title"},[t._v(t._s(t.product.productTitle))]),e("p",{staticClass:"product__info product__info--color"},[t._v(" Цвет: "),e("span",[e("i",{style:`background-color: ${t.product.colorCode}`}),t._v(" "+t._s(t.product.colorCodeTilte)+" ")])]),e("span",{staticClass:"product__code"},[t._v(" Артикул: "+t._s(t.product.productId)+" ")]),e("div",{staticClass:"product__counter form__counter"},[e("button",{attrs:{type:"button","aria-label":"Убрать один товар"},on:{click:function(e){t.amount--}}},[e("svg",{attrs:{width:"10",height:"10",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-minus"}})])]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amount,expression:"amount",modifiers:{number:!0}}],attrs:{type:"text",name:"count"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(e){t.amount++}}},[e("svg",{attrs:{width:"10",height:"10",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-plus"}})])])]),e("b",{staticClass:"product__price"},[t._v(" "+t._s(t._f("numberformat")(t.product.price*t.product.quantity))+" ₽ ")]),e("button",{staticClass:"product__del button-del",attrs:{type:"button","aria-label":"Удалить товар из корзины"},on:{click:function(e){return e.preventDefault(),t.deleteProduct(t.product.basketItemId)}}},[e("svg",{attrs:{width:"20",height:"20",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-close"}})])])])},ct=[],lt={props:["product"],filters:{numberformat:w},computed:{amount:{get(){return this.product.quantity},set(t){t>0&&this.$store.dispatch("updateCartProductAmount",{basketItemId:this.product.basketItemId,quantity:t})}}},methods:{...(0,p.nv)(["deleteCartProduct"]),deleteProduct(t){this.deleteCartProduct(t)}}},nt=lt,dt=(0,d.Z)(nt,ot,ct,!1,null,null,null),ut=dt.exports,_t={name:"CartPage",components:{CartItem:ut},filters:{numberformat:w},computed:{...(0,p.Se)({products:"cartDetailProducts",totalPrice:"cartTotalPrice"})}},pt=_t,mt=(0,d.Z)(pt,st,it,!1,null,null,null),ht=mt.exports,ft=function(){var t=this,e=t._self._c;return e("main",{staticClass:"content container"},[e("div",{staticClass:"content__top"},[e("ul",{staticClass:"breadcrumbs"},[e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1),t._m(0)]),t._m(1)]),e("section",{staticClass:"cart"},[e("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.order.apply(null,arguments)}}},[e("div",{staticClass:"cart__field"},[e("div",{staticClass:"cart__data"},[e("BaseFormText",{attrs:{error:t.formError.name,type:"text",title:"ФИО",placeholder:"Введите ваше полное имя"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),e("BaseFormText",{attrs:{error:t.formError.address,type:"text",title:"Адрес доставки",placeholder:"Введите ваш адрес"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}}),e("BaseFormText",{attrs:{error:t.formError.phone,type:"text",title:"Телефон",placeholder:"Введите ваш телефон"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),e("BaseFormText",{attrs:{error:t.formError.email,type:"text",title:"Email",placeholder:"Введи ваш Email"},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}}),e("BaseFormTextarea",{attrs:{title:"Комментарий к заказу",error:t.formError.comment,placeholder:"Ваши пожелания"},model:{value:t.formData.comment,callback:function(e){t.$set(t.formData,"comment",e)},expression:"formData.comment"}})],1),e("div",{staticClass:"cart__options"},[e("h3",{staticClass:"cart__title"},[t._v(" Доставка "),t.formError.deliveryTypeId?e("span",{staticClass:"error-order"},[t._v(t._s(t.formError.deliveryTypeId))]):t._e()]),e("ul",{staticClass:"cart__options options"},[e("li",{staticClass:"options__item"},[e("label",{staticClass:"options__label"},[e("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery",value:"1"},on:{change:function(e){return t.onChangeRadioBtn("delivery","1")}}}),t._m(2)])]),e("li",{staticClass:"options__item"},[e("label",{staticClass:"options__label"},[e("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"delivery",value:"2"},on:{change:function(e){return t.onChangeRadioBtn("delivery","2")}}}),t._m(3)])])]),e("h3",{staticClass:"cart__title"},[t._v(" Оплата "),t.formError.paymentTypeId?e("span",{staticClass:"error-order"},[t._v(t._s(t.formError.paymentTypeId))]):t._e()]),t.formError.paymentTypeId?e("span",[t._v(t._s(t.formError.paymentTypeId))]):t._e(),e("ul",{staticClass:"cart__options options"},[e("li",{staticClass:"options__item"},[e("label",{staticClass:"options__label"},[e("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay",value:"1"},on:{change:function(e){return t.onChangeRadioBtn("pay","1")}}}),e("span",{staticClass:"options__value"},[t._v(" Картой при получении ")])])]),e("li",{staticClass:"options__item"},[e("label",{staticClass:"options__label"},[e("input",{staticClass:"options__radio sr-only",attrs:{type:"radio",name:"pay",value:"2"},on:{change:function(e){return t.onChangeRadioBtn("pay","2")}}}),e("span",{staticClass:"options__value"},[t._v(" Наличными при получении ")])])])])])]),e("div",{staticClass:"cart__block"},[e("ul",{staticClass:"cart__orders"},t._l(t.products,(function(a){return e("li",{key:a.productId,staticClass:"cart__order"},[e("h3",[t._v(t._s(a.productTitle))]),e("b",[t._v(t._s(t._f("numberformat")(a.price))+" ₽")]),e("span",[t._v("Артикул: "+t._s(a.productId))])])})),0),e("div",{staticClass:"cart__total"},[e("p",[t._v(" Доставка: "),e("b",[t._v(t._s(t.deliveryType))])]),e("p",[t._v(" Итого: "),e("b",[t._v(t._s(t.products.length))]),t._v(" товара на сумму "),e("b",[t._v(t._s(t._f("numberformat")(null==t.totalPriceWithDelivery?t.totalPrice:t.totalPriceWithDelivery))+" ₽")])])]),e("button",{staticClass:"cart__button button button--primery",attrs:{type:"submit"}},[t._v(" Оформить заказ ")])]),t.formErrorMessage?e("div",{staticClass:"cart__error form__error-block"},[e("h4",[t._v("Заявка не отправлена!")]),e("p",[t._v(" "+t._s(t.formErrorMessage)+" ")])]):t._e(),t.formPreloader?e("div",[t._v("Отправка данных..")]):t._e()])])])},vt=[function(){var t=this,e=t._self._c;return e("li",{staticClass:"breadcrumbs__item"},[e("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"content__row"},[e("h1",{staticClass:"content__title"},[t._v("Оформление заказа")])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"options__value"},[t._v(" Самовывоз "),e("b",[t._v("бесплатно")])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"options__value"},[t._v(" Курьером "),e("b",[t._v("1200 ₽")])])}],Ct=function(){var t=this,e=t._self._c;return e("BaseFormField",{attrs:{title:t.title,error:t.error}},["checkbox"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.dataValue)?t._i(t.dataValue,null)>-1:t.dataValue},on:{change:function(e){var a=t.dataValue,r=e.target,s=!!r.checked;if(Array.isArray(a)){var i=null,o=t._i(a,i);r.checked?o<0&&(t.dataValue=a.concat([i])):o>-1&&(t.dataValue=a.slice(0,o).concat(a.slice(o+1)))}else t.dataValue=s}}}):"radio"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:"radio"},domProps:{checked:t._q(t.dataValue,null)},on:{change:function(e){t.dataValue=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.dataValue},on:{input:function(e){e.target.composing||(t.dataValue=e.target.value)}}})])},gt=[],bt=function(){var t=this,e=t._self._c;return e("label",{staticClass:"form__label"},[t._t("default"),e("span",{staticClass:"form__value"},[t._v(t._s(t.title))]),t.error?e("span",{staticClass:"form__error"},[t._v(t._s(t.error))]):t._e()],2)},yt=[],kt={props:["title","error"]},It=kt,Pt=(0,d.Z)(It,bt,yt,!1,null,null,null),xt=Pt.exports,Dt={props:["title","error","placeholder","value","type"],components:{BaseFormField:xt},computed:{dataValue:{get(){return this.value},set(t){this.$emit("input",t)}}}},wt={mixins:[Dt]},At=wt,Tt=(0,d.Z)(At,Ct,gt,!1,null,null,null),St=Tt.exports,$t=function(){var t=this,e=t._self._c;return e("BaseFormField",{attrs:{title:t.title,error:t.error}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input form__input--area",attrs:{placeholder:t.placeholder},domProps:{value:t.dataValue},on:{input:function(e){e.target.composing||(t.dataValue=e.target.value)}}})])},Ft=[],Bt={mixins:[Dt]},Mt=Bt,Zt=(0,d.Z)(Mt,$t,Ft,!1,null,null,null),Lt=Zt.exports,Ot={name:"OrderPage",data(){return{formData:{},formError:{},formErrorMessage:"",deliveryType:"",totalPriceWithDelivery:null,formPreloader:!1}},components:{BaseFormText:St,BaseFormTextarea:Lt},filters:{numberformat:w},methods:{onChangeRadioBtn(t,e){"delivery"===t&&"1"===e&&(this.formData.deliveryTypeId=1,this.deliveryType="Бесплатно",this.totalPriceWithDelivery=this.totalPrice),"delivery"===t&&"2"===e&&(this.formData.deliveryTypeId=2,this.deliveryType="1200 ₽",this.totalPriceWithDelivery=this.totalPrice+1200),"pay"===t&&"1"===e&&(this.formData.paymentTypeId=1),"pay"===t&&"2"===e&&(this.formData.paymentTypeId=2)},order(){this.formError={},this.formErrorMessage="",this.formPreloader=!0,setTimeout((()=>{y.Z.post(k+"/api/orders",{...this.formData},{params:{userAccessKey:this.$store.state.userAccessKey}}).then((t=>{this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo",t.data),this.$router.push({name:"orderInfo",params:{id:t.data.id}}),this.formPreloader=!1})).catch((t=>{this.formError=t.response.data.error.request||{},this.formErrorMessage=t.response.data.error.message,this.formPreloader=!1}))}),500)}},computed:{...(0,p.Se)({products:"cartDetailProducts",totalPrice:"cartTotalPrice"})}},Et=Ot,qt=(0,d.Z)(Et,ft,vt,!1,null,null,null),Kt=qt.exports,Vt=function(){var t=this,e=t._self._c;return e("main",{staticClass:"content container"},[e("div",{staticClass:"content__top"},[e("ul",{staticClass:"breadcrumbs"},[e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1),t._m(0)]),e("h1",{staticClass:"content__title"},[t._v(" Заказ оформлен "),e("span",[t._v("№ "+t._s(t.$store.state.orderInfo.id))])])]),e("section",{staticClass:"cart"},[e("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[e("div",{staticClass:"cart__field"},[e("p",{staticClass:"cart__message"},[t._v(" Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ")]),e("ul",{staticClass:"dictionary"},[e("li",{staticClass:"dictionary__item"},[e("span",{staticClass:"dictionary__key"},[t._v(" Получатель ")]),e("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.$store.state.orderInfo.name)+" ")])]),e("li",{staticClass:"dictionary__item"},[e("span",{staticClass:"dictionary__key"},[t._v(" Адрес доставки ")]),e("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.$store.state.orderInfo.address)+" ")])]),e("li",{staticClass:"dictionary__item"},[e("span",{staticClass:"dictionary__key"},[t._v(" Телефон ")]),e("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.$store.state.orderInfo.phone)+" ")])]),e("li",{staticClass:"dictionary__item"},[e("span",{staticClass:"dictionary__key"},[t._v(" Email ")]),e("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.$store.state.orderInfo.email)+" ")])]),e("li",{staticClass:"dictionary__item"},[e("span",{staticClass:"dictionary__key"},[t._v(" Способ оплаты ")]),e("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.$store.state.orderInfo.paymentType)+" ")])])])]),e("div",{staticClass:"cart__block"},[e("ul",{staticClass:"cart__orders"},t._l(t.$store.state.orderInfo.basket.items,(function(a){return e("li",{key:a.product.id,staticClass:"cart__order"},[e("h3",[t._v(t._s(a.product.title))]),e("b",[t._v(t._s(t._f("numberformat")(a.price))+" ₽")]),e("span",[t._v("Артикул: "+t._s(a.product.id))])])})),0),e("div",{staticClass:"cart__total"},[e("p",[t._v(" Доставка: "),e("b",[t._v(t._s(t.$store.state.orderInfo.deliveryType.title))])]),e("p",[t._v(" Итого: "),e("b",[t._v(t._s(t.$store.state.orderInfo.basket.items.length))]),t._v(" товара на сумму "),e("b",[t._v(t._s(t._f("numberformat")(t.$store.state.orderInfo.totalPrice))+" ₽")])])])])])])])},Nt=[function(){var t=this,e=t._self._c;return e("li",{staticClass:"breadcrumbs__item"},[e("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])}],Rt={filters:{numberformat:w},created(){this.$store.state.orderInfo&&this.$store.state.orderInfo.id===this.$route.params.id||this.$store.dispatch("loadOrderInfo",this.$route.params.id)}},zt=Rt,Ut=(0,d.Z)(zt,Vt,Nt,!1,null,null,null),jt=Ut.exports;r.ZP.use(C.ZP);const Wt=[{name:"main",component:Q,path:"/"},{name:"product",component:rt,path:"/product/:id"},{name:"cart",component:ht,path:"/cart"},{name:"order",component:Kt,path:"/order"},{name:"orderInfo",component:jt,path:"/order/:id"}],Gt=new C.ZP({routes:Wt});var Ht=Gt;r.ZP.use(p.ZP);var Jt=new p.ZP.Store({state:{cartProducts:[],userAccessKey:null,cartProductsData:[],orderInfo:null},mutations:{updateUserAccessKey(t,e){t.userAccessKey=e},updateCartProductsData(t,e){t.cartProductsData=e},updateCartProductAmount(t,{basketItemId:e,quantity:a}){const r=t.cartProducts.find((t=>t.basketItemId===e));r&&(r.quantity=a)},syncCartProducts(t){t.cartProducts=t.cartProductsData.map((t=>({basketItemId:t.id,productTitle:t.product.title,productId:t.product.id,price:t.price,quantity:t.quantity,colorId:t.color.color.id,colorCode:t.color.color.code,colorCodeTilte:t.color.color.title,sizeId:t.size.id,img:t.color.gallery[0].file.url})))},resetCart(t){t.cartProducts=[],t.cartProductsData=[]},updateOrderInfo(t,e){t.orderInfo=e}},getters:{cartDetailProducts(t){return t.cartProducts},cartTotalPrice(t,e){return e.cartDetailProducts.reduce(((t,e)=>e.price*e.quantity+t),0)}},actions:{loadCart(t){return y.Z.get(k+"/api/baskets",{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.state.userAccessKey||(localStorage.setItem("userAccessKey",e.data.user.accessKey),t.commit("updateUserAccessKey",e.data.user.accessKey)),t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")}))},addProductToCart(t,{productId:e,quantity:a,colorId:r,sizeId:s}){return y.Z.post(k+"/api/baskets/products",{productId:e,quantity:a,sizeId:s,colorId:r},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")}))},updateCartProductAmount(t,{basketItemId:e,quantity:a}){if(t.commit("updateCartProductAmount",{basketItemId:e,quantity:a}),!(a<1))return y.Z.put(k+"/api/baskets/products",{basketItemId:e,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")})).catch((()=>{t.commit("syncCartProducts")}))},deleteCartProduct(t,e){return y.Z.delete(k+"/api/baskets/products",{data:{basketItemId:e},params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")}))},loadOrderInfo(t,e){return y.Z.get(k+"/api/orders/"+e,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateOrderInfo",e.data)}))}}});r.ZP.config.productionTip=!1,new r.ZP({store:Jt,router:Ht,render:t=>t(v)}).$mount("#app")}},e={};function a(r){var s=e[r];if(void 0!==s)return s.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,r,s,i){if(!r){var o=1/0;for(d=0;d<t.length;d++){r=t[d][0],s=t[d][1],i=t[d][2];for(var c=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](r[l])}))?r.splice(l--,1):(c=!1,i<o&&(o=i));if(c){t.splice(d--,1);var n=s();void 0!==n&&(e=n)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[r,s,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,i,o=r[0],c=r[1],l=r[2],n=0;if(o.some((function(e){return 0!==t[e]}))){for(s in c)a.o(c,s)&&(a.m[s]=c[s]);if(l)var d=l(a)}for(e&&e(r);n<o.length;n++)i=o[n],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},r=self["webpackChunkmoire"]=self["webpackChunkmoire"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(2632)}));r=a.O(r)})();
//# sourceMappingURL=app.9712442f.js.map